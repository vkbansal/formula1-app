---
pagination:
  data: seasons
  size: 1
  alias: year
permalink: 'seasons/{{year}}/'
chartjs: true
eleventyComputed:
  title: '{{year}} Season'
chartTabs:
  - label: Driver Standings
    id: driver-standings
  - label: Driver Points
    id: driver-points
  - label: Constructor Standings
    id: constructor-standings
  - label: Constructor Points
    id: constructor-points
---
{% extends './_layouts/main.njk' %}

{% block breadcrumbs %}
<a href="/seasons">Seasons</a>
<span>{{year}}</span>
{% endblock %}

{% block content %}
<div class="season-header">
  <h1>{{year}} Season</h1>
  <nav class="season-pagination">
    {% if pagination.href.previous %}
    <a href="{{pagination.href.previous}}">&larr; {{year - 1}}</a>
    {% endif %}
    {% if pagination.href.next %}
    <a href="{{pagination.href.next}}">{{year + 1}} &rarr;</a>
    {% endif %}
  </nav>
</div>
<div class="tabs season-tabs" x-data="{ activeTab: 0 }">
  <div class="tab-list" role="tablist">
    <div class="tab"  @click="activeTab = 0" :class="{ 'tab-active': activeTab === 0 }">Races</div>
    {% for tab in chartTabs %}
    <div class="tab"  @click="activeTab = {{loop.index}}" :class="{ 'tab-active': activeTab === {{loop.index}} }">{{tab.label}}</div>
    {% endfor %}
  </div>
  <div class="tab-panel" :class="{ 'tab-active': activeTab === 0 }">
    <table class="table">
      <thead>
        <th>Round</th>
        <th>Race</th>
        <th>Circuit</th>
        <th>Date</th>
        <th>Winner</th>
      </thead>
      <tbody>
        {% for race in pageData.races %}
        {% set winnerDriver = pageData.drivers[race.winnerDriver] %}
        {% set winnerConstructor = pageData.constructors[race.winnerConstructor] %}
        <tr>
          <td>{{race.round}}</td>
          <td>{{race.name}}</td>
          <td>{{race.circuit.name}} <span class="circuit-location-cell">{{race.circuit.location}}, {{race.circuit.country}}</span></td>
          <td>{{race.date | humanDate}}</td>
          <td>
            {% if winnerDriver %}
            <span class="nationality {{winnerDriver.nationality | lower}}"/>
            <span>{{winnerDriver.name}}</span>
            {% endif %}
            {% if winnerConstructor %}
            <span>({{winnerConstructor.name}})<span>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% for tab in chartTabs %}
  <div class="tab-panel" :class="{ 'tab-active': activeTab === {{loop.index}} }">
    <div class="season-graph">
      <canvas  id="{{tab.id}}" width="400" height="400"></canvas>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}

{% block beforescripts %}
<script type="text/javascript">
  const raceNames =  {{pageData.raceNames | dump | safe}};
  const driversData = {{pageData.driversData | dump | safe}};
  const constructorsData = {{pageData.constructorsData | dump | safe}};
</script>
{% endblock %}

{% block afterscripts %}
<script type="text/javascript" src="https://unpkg.com/chartjs-plugin-crosshair@1.2.0/dist/chartjs-plugin-crosshair.min.js"></script>
<script  type="text/javascript" src="{{assets['_assets/scripts/season.js']}}"></script>
{% endblock %}
